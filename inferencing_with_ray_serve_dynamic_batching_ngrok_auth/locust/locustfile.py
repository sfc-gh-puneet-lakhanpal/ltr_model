
from locust import User, task, between
import logging
import requests
import os
import sys
import json
ngrok_url = "https://snowflakepsekipiltrserving.ngrok.app"
data = {"features": [[1.0, 0.0, 39.0, 79275.83, 790.0, 1.0, 500.0, 100.0, 0.0, 34855.0, 290.0, 44420.83, 2.27444642088653, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0],
                [1.0, 0.0, 39.0, 79275.83, 790.0, 1.0, 500.0, 100.0, 0.0, 34855.0, 290.0, 44420.83, 2.27444642088653, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0],
                [1.0, 0.0, 39.0, 79275.83, 790.0, 1.0, 500.0, 100.0, 0.0, 34855.0, 290.0, 44420.83, 2.27444642088653, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0],
                [1.0, 0.0, 39.0, 79275.83, 790.0, 1.0, 500.0, 100.0, 0.0, 34855.0, 290.0, 44420.83, 2.27444642088653, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0],
                [1.0, 0.0, 39.0, 79275.83, 790.0, 1.0, 500.0, 100.0, 0.0, 34855.0, 290.0, 44420.83, 2.27444642088653, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0],
                [1.0, 0.0, 39.0, 79275.83, 790.0, 1.0, 500.0, 100.0, 0.0, 34855.0, 290.0, 44420.83, 2.27444642088653, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0],
                [1.0, 0.0, 39.0, 79275.83, 790.0, 1.0, 500.0, 100.0, 0.0, 34855.0, 290.0, 44420.83, 2.27444642088653, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0],
                [1.0, 0.0, 39.0, 79275.83, 790.0, 1.0, 500.0, 100.0, 0.0, 34855.0, 290.0, 44420.83, 2.27444642088653, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0],
                [1.0, 0.0, 39.0, 79275.83, 790.0, 1.0, 500.0, 100.0, 0.0, 34855.0, 290.0, 44420.83, 2.27444642088653, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0],
                [1.0, 0.0, 39.0, 79275.83, 790.0, 1.0, 500.0, 100.0, 0.0, 34855.0, 290.0, 44420.83, 2.27444642088653, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0]]}

def rankccoffers(url, data):
  response = requests.post(f'{url}',  json=data)
  return response.json()
class ClassificationUser(User):
    @task
    def generation(self):
        # Invoke the model
        with self.environment.events.request.measure("[Send]", "LTR REST API performance authenticated with Ngrok"):
            results = rankccoffers(url=ngrok_url, data=data)
            logging.info(results)
                  
